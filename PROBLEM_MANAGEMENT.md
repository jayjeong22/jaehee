# 문제 관리 가이드

## 개요

**작동 방식:**
1. **관리자(개발자)**가 PDF에서 문제를 추출하여 Firestore에 저장합니다.
2. **학생**이 단원을 선택하면 **자동으로 Firestore에서 문제가 로드**됩니다.
3. 학생은 PDF를 업로드할 필요가 없습니다.

로컬에 있는 예시 문제는 Firestore에 문제가 없을 때만 사용됩니다.

## 문제 추가 방법 (관리자 전용)

### 워크플로우

1. **1단계: PDF 텍스트 추출**
   - 관리자 페이지 접속 (`/admin.html`)
   - "PDF 텍스트 추출하기" 섹션에서 PDF 파일 업로드
   - "PDF 텍스트 추출하기" 버튼 클릭
   - 추출된 텍스트 확인

2. **2단계: 문제 입력 및 Firestore 저장**
   - "문제 입력 및 Firestore 저장" 섹션에서:
     - 학년, 단원, 난이도 선택
     - 문제 유형 선택 (객관식/주관식)
     - 추출된 PDF 텍스트를 참고하여 문제 내용 입력
     - 객관식인 경우: 보기 4개 입력 및 정답 선택
     - 주관식인 경우: 정답 입력
   - "문제 추가" 버튼 클릭
   - **저장된 문제는 학생 화면에서 자동으로 로드됩니다!**

### 학생 사용 방법

학생은 단원을 선택하기만 하면 됩니다:
1. 학생 화면 접속
2. 학년, 단원, 난이도 선택
3. "문제 풀이 시작" 클릭
4. **Firestore에 저장된 문제가 자동으로 로드됩니다!**

**참고**: 
- PDF 자동 파싱은 텍스트 추출만 수행합니다.
- 추출된 텍스트를 확인하고 수동으로 문제를 입력하는 것을 권장합니다.
- 문제를 저장하면 즉시 학생 화면에서 사용 가능합니다.

## 문제 데이터 구조

각 문제는 다음 형식으로 저장됩니다:

```javascript
{
  grade: 5,           // 학년 (4, 5, 6)
  unit: 1,            // 단원 (1~6)
  difficulty: 1,      // 난이도 (1: 쉬움, 2: 보통, 3: 어려움)
  type: 'multiple',   // 문제 유형 ('multiple': 객관식, 'short': 주관식)
  question: '문제 내용',
  
  // 객관식인 경우
  options: ['보기1', '보기2', '보기3', '보기4'],
  correct: 0,  // 정답 인덱스 (0~3)
  
  // 주관식인 경우
  answer: '정답',
  
  timestamp: Date     // 저장 시간
}
```

## 문제 로드 우선순위

**학생 화면에서:**
1. **Firestore에서 자동 로드**: 학생이 단원을 선택하면 Firestore에서 문제를 자동으로 로드
2. **로컬 문제 사용**: Firestore에 해당 학년/단원/난이도의 문제가 없으면 로컬 예시 문제 사용

**중요**: 관리자가 Firestore에 문제를 저장하면, 학생이 단원을 선택할 때 자동으로 로드됩니다. 학생은 별도의 작업이 필요 없습니다.

## 문제 관리 기능

### 문제 목록 보기
- 관리자 페이지 하단에서 저장된 문제 목록 확인
- 학년/단원별 필터링 가능
- 문제 삭제 가능

### 문제 삭제
- 문제 목록에서 각 문제 옆의 "삭제" 버튼 클릭
- 확인 후 삭제됨

## 5학년 단원평가 문제 추가 예시

1. **1단원 문제 추가**:
   - 학년: 5학년
   - 단원: 1단원
   - PDF 파일 업로드 또는 수동 입력
   - 각 문제의 난이도를 적절히 설정

2. **2~6단원도 동일하게 반복**

3. **문제 확인**:
   - 학생 화면에서 해당 학년/단원 선택 시 Firestore의 문제가 자동으로 표시됨

## 주의사항

- 문제를 추가하면 즉시 학생 화면에서 사용 가능
- 문제 삭제 시 주의 (복구 불가)
- PDF 자동 파싱은 보조 도구일 뿐, 수동 확인 필수
- 객관식 보기는 최소 2개 이상 필요
- 문제 내용과 정답은 정확히 입력해야 함

## 5학년 단원평가 문제 추가 예시

### 관리자 작업 (한 번만 수행)

1. **PDF 파일 준비** (예: 5학년 1단원 단원평가 PDF)
2. **관리자 페이지 접속** (`/admin.html`)
3. **1단계: PDF 텍스트 추출**
   - PDF 파일 업로드
   - "PDF 텍스트 추출하기" 클릭
   - 추출된 텍스트 확인
4. **2단계: 문제 입력**
   - 학년: 5학년 선택
   - 단원: 1단원 선택
   - 각 문제를 하나씩 입력:
     - PDF 텍스트를 참고하여 문제 내용 입력
     - 보기 및 정답 입력
     - 난이도 설정 (쉬움/보통/어려움)
     - "문제 추가" 클릭
   - 모든 문제 추가 완료 (약 10문제)
5. **2~6단원도 동일하게 반복**

### 학생 사용 (자동)

1. 학생 화면 접속
2. 5학년, 1단원 선택
3. 난이도 선택
4. "문제 풀이 시작" 클릭
5. **→ Firestore에 저장된 문제가 자동으로 로드됩니다!**

**중요**: 관리자가 문제를 저장하면, 학생은 단원을 선택하기만 하면 자동으로 문제가 로드됩니다. 학생은 PDF를 업로드하거나 다른 작업을 할 필요가 없습니다.

